<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Json Setlist</title>
	
	
	<script language="javascript">
		function getData() {
			var reqObj = new XMLHttpRequest();
			
			reqObj.open("GET", "https://naomiparadis.github.io/Assignment8/setlist.json", true);
			
			reqObj.onreadystatechange = function() {
				if(reqObj.readyState==4 && reqObj.status==200) {
					//alert("ready");
					var setlistData = reqObj.responseText;
					returnHTML = setlistData;
					document.getElementById("serial").innerHTML =returnHTML;
					
					var setlistObj = JSON.parse(setlistData);
					DisplayFormatted(setlistObj);
				};
			};
			reqObj.send();
		};
		
	
		
	function DisplayFormatted(sl) {
		var slFormHtml = "";
		for (i=0; i<sl.length; i++) {
			var songstr = "";
			songstr += '<div id="title">' + sl[i].title + '</div>';
			songstr += '<div>Artist: ' + sl[i].artist + '<br>Year Released: ' + sl[i].year;
			var genres = sl[i].genre;
			var gstr = ""; 
			for(j=0; j<genres.length; j++) {
				gstr += genres[j];
				if (j != (genres.length - 1)) {
					gstr += ', '
				}
			}
			songstr += '<br>Genre: ' + gstr;
			slFormHtml += songstr;
		}
		document.getElementById("format").innerHTML =slFormHtml;
	}
		
	//DisplayString();
	//DisplayFormatted();
	</script>
	
	
</head>

<body onload="getData()">
	<h1> JSON Setlist</h1>
	<div id="serial">
	</div>
	
	<div id="format">
	</div>
	
</body>
</html>
